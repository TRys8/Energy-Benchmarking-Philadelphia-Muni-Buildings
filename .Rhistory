test$y_x123 <- predict(lm.123, newdata=test)
test$y_eq_123 <- apply(test[, c("y_x1","y_x2","y_x3")], 1, mean)
test$y_w123 <- apply(test[, c("y_x1","y_x2","y_x3")], 1, weighted.mean, w=c(.4, .3, .2))
cor(test[, c("y_eq_123", "y_x123")])
library(mlbench)
install.packages("mlbench")
data(BostonHousing2)
library(mlbench)
data(BostonHousing2)
summary(data)
summary(BostonHousing2)
data(iris)
summaray(iris)
summary(iris)
train_index <- sample(1:506, size=350, replace=F)
train <- BostonHousing2[train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
test <- BostonHousing2[-train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
lm.1 <- lm(cmedv ~ age, data=train)
lm.2 <- lm(cmedv ~ crim, data=train)
lm.3 <- lm(cmedv ~ ptratio, data=train)
lm.4 <- lm(cmedv ~ tax, data=train)
lm.1234 <- lm(cmedv ~ age + crim + ptratio + tax, data=train)
summary(lm.1)
summary(lm.2)
summary(lm.3)
summary(lm.4)
summary(lm.1234)
test$y_x1 <- predict(lm.1, newdata=test)
test$y_x2 <- predict(lm.2, newdata=test)
test$y_x3 <- predict(lm.3, newdata=test)
test$y_x4 <- predict(lm.4, newdata=test)
test$y_eq_1234<- apply(test[, c("y_x1","y_x2","y_x3", "y_x4")], 1, mean)
test$y_x1234 <- predict(lm.1234, newdata=test)
cor(test)
cor(test[, c("y_eq_1234", "y_x1234")])
train_index <- sample(1:506, size=350, replace=F)
train <- BostonHousing2[train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
test <- BostonHousing2[-train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
lm.1 <- lm(cmedv ~ age, data=train)
lm.2 <- lm(cmedv ~ crim, data=train)
lm.3 <- lm(cmedv ~ ptratio, data=train)
lm.4 <- lm(cmedv ~ tax, data=train)
lm.1234 <- lm(cmedv ~ age + crim + ptratio + tax, data=train)
test$y_x1 <- predict(lm.1, newdata=test)
test$y_x2 <- predict(lm.2, newdata=test)
test$y_x3 <- predict(lm.3, newdata=test)
test$y_x4 <- predict(lm.4, newdata=test)
test$y_eq_1234<- apply(test[, c("y_x1","y_x2","y_x3", "y_x4")], 1, mean)
test$y_x1234 <- predict(lm.1234, newdata=test)
cor(test[, c("y_eq_1234", "y_x1234")])
train_index <- sample(1:506, size=350, replace=F)
train <- BostonHousing2[train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
test <- BostonHousing2[-train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
lm.1 <- lm(cmedv ~ age, data=train)
lm.2 <- lm(cmedv ~ crim, data=train)
lm.3 <- lm(cmedv ~ ptratio, data=train)
lm.4 <- lm(cmedv ~ tax, data=train)
lm.1234 <- lm(cmedv ~ age + crim + ptratio + tax, data=train)
test$y_x1 <- predict(lm.1, newdata=test)
test$y_x2 <- predict(lm.2, newdata=test)
test$y_x3 <- predict(lm.3, newdata=test)
test$y_x4 <- predict(lm.4, newdata=test)
test$y_eq_1234<- apply(test[, c("y_x1","y_x2","y_x3", "y_x4")], 1, mean)
test$y_x1234 <- predict(lm.1234, newdata=test)
cor(test[, c("y_eq_1234", "y_x1234")])
train_index <- sample(1:506, size=350, replace=F)
train <- BostonHousing2[train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
test <- BostonHousing2[-train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
lm.1 <- lm(cmedv ~ age, data=train)
lm.2 <- lm(cmedv ~ crim, data=train)
lm.3 <- lm(cmedv ~ ptratio, data=train)
lm.4 <- lm(cmedv ~ tax, data=train)
lm.1234 <- lm(cmedv ~ age + crim + ptratio + tax, data=train)
test$y_x1 <- predict(lm.1, newdata=test)
test$y_x2 <- predict(lm.2, newdata=test)
test$y_x3 <- predict(lm.3, newdata=test)
test$y_x4 <- predict(lm.4, newdata=test)
test$y_eq_1234<- apply(test[, c("y_x1","y_x2","y_x3", "y_x4")], 1, mean)
test$y_x1234 <- predict(lm.1234, newdata=test)
cor(test[, c("y_eq_1234", "y_x1234")])
train_index <- sample(1:506, size=350, replace=F)
train <- BostonHousing2[train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
test <- BostonHousing2[-train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
lm.1 <- lm(cmedv ~ age, data=train)
lm.2 <- lm(cmedv ~ crim, data=train)
lm.3 <- lm(cmedv ~ ptratio, data=train)
lm.4 <- lm(cmedv ~ tax, data=train)
lm.1234 <- lm(cmedv ~ age + crim + ptratio + tax, data=train)
test$y_x1 <- predict(lm.1, newdata=test)
test$y_x2 <- predict(lm.2, newdata=test)
test$y_x3 <- predict(lm.3, newdata=test)
test$y_x4 <- predict(lm.4, newdata=test)
test$y_eq_1234<- apply(test[, c("y_x1","y_x2","y_x3", "y_x4")], 1, mean)
test$y_x1234 <- predict(lm.1234, newdata=test)
cor(test[, c("y_eq_1234", "y_x1234")])
train_index <- sample(1:506, size=350, replace=F)
train <- BostonHousing2[train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
test <- BostonHousing2[-train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
lm.1 <- lm(cmedv ~ age, data=train)
lm.2 <- lm(cmedv ~ crim, data=train)
lm.3 <- lm(cmedv ~ ptratio, data=train)
lm.4 <- lm(cmedv ~ tax, data=train)
lm.1234 <- lm(cmedv ~ age + crim + ptratio + tax, data=train)
test$y_x1 <- predict(lm.1, newdata=test)
test$y_x2 <- predict(lm.2, newdata=test)
test$y_x3 <- predict(lm.3, newdata=test)
test$y_x4 <- predict(lm.4, newdata=test)
test$y_eq_1234<- apply(test[, c("y_x1","y_x2","y_x3", "y_x4")], 1, mean)
test$y_x1234 <- predict(lm.1234, newdata=test)
cor(test[, c("y_eq_1234", "y_x1234")])
train_index <- sample(1:506, size=350, replace=F)
train <- BostonHousing2[train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
test <- BostonHousing2[-train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
lm.1 <- lm(cmedv ~ age, data=train)
lm.2 <- lm(cmedv ~ crim, data=train)
lm.3 <- lm(cmedv ~ ptratio, data=train)
lm.4 <- lm(cmedv ~ tax, data=train)
lm.1234 <- lm(cmedv ~ age + crim + ptratio + tax, data=train)
test$y_x1 <- predict(lm.1, newdata=test)
test$y_x2 <- predict(lm.2, newdata=test)
test$y_x3 <- predict(lm.3, newdata=test)
test$y_x4 <- predict(lm.4, newdata=test)
test$y_eq_1234<- apply(test[, c("y_x1","y_x2","y_x3", "y_x4")], 1, mean)
test$y_x1234 <- predict(lm.1234, newdata=test)
cor(test[, c("y_eq_1234", "y_x1234")])
train_index <- sample(1:506, size=350, replace=F)
train <- BostonHousing2[train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
test <- BostonHousing2[-train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
lm.1 <- lm(cmedv ~ age, data=train)
lm.2 <- lm(cmedv ~ crim, data=train)
lm.3 <- lm(cmedv ~ ptratio, data=train)
lm.4 <- lm(cmedv ~ tax, data=train)
lm.1234 <- lm(cmedv ~ age + crim + ptratio + tax, data=train)
test$y_x1 <- predict(lm.1, newdata=test)
test$y_x2 <- predict(lm.2, newdata=test)
test$y_x3 <- predict(lm.3, newdata=test)
test$y_x4 <- predict(lm.4, newdata=test)
test$y_eq_1234<- apply(test[, c("y_x1","y_x2","y_x3", "y_x4")], 1, mean)
test$y_x1234 <- predict(lm.1234, newdata=test)
cor(test[, c("y_eq_1234", "y_x1234")])
train_index <- sample(1:506, size=350, replace=F)
train <- BostonHousing2[train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
test <- BostonHousing2[-train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
lm.1 <- lm(cmedv ~ age, data=train)
lm.2 <- lm(cmedv ~ crim, data=train)
lm.3 <- lm(cmedv ~ ptratio, data=train)
lm.4 <- lm(cmedv ~ tax, data=train)
lm.1234 <- lm(cmedv ~ age + crim + ptratio + tax, data=train)
test$y_x1 <- predict(lm.1, newdata=test)
test$y_x2 <- predict(lm.2, newdata=test)
test$y_x3 <- predict(lm.3, newdata=test)
test$y_x4 <- predict(lm.4, newdata=test)
test$y_eq_1234<- apply(test[, c("y_x1","y_x2","y_x3", "y_x4")], 1, mean)
test$y_x1234 <- predict(lm.1234, newdata=test)
cor(test[, c("y_eq_1234", "y_x1234")])
train_index <- sample(1:506, size=350, replace=F)
train <- BostonHousing2[train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
test <- BostonHousing2[-train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
lm.1 <- lm(cmedv ~ age, data=train)
lm.2 <- lm(cmedv ~ crim, data=train)
lm.3 <- lm(cmedv ~ ptratio, data=train)
lm.4 <- lm(cmedv ~ tax, data=train)
lm.1234 <- lm(cmedv ~ age + crim + ptratio + tax, data=train)
test$y_x1 <- predict(lm.1, newdata=test)
test$y_x2 <- predict(lm.2, newdata=test)
test$y_x3 <- predict(lm.3, newdata=test)
test$y_x4 <- predict(lm.4, newdata=test)
test$y_eq_1234<- apply(test[, c("y_x1","y_x2","y_x3", "y_x4")], 1, mean)
test$y_x1234 <- predict(lm.1234, newdata=test)
cor(test[, c("y_eq_1234", "y_x1234")])
train_index <- sample(1:506, size=350, replace=F)
train <- BostonHousing2[train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
test <- BostonHousing2[-train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
lm.1 <- lm(cmedv ~ age, data=train)
lm.2 <- lm(cmedv ~ crim, data=train)
lm.3 <- lm(cmedv ~ ptratio, data=train)
lm.4 <- lm(cmedv ~ tax, data=train)
lm.1234 <- lm(cmedv ~ age + crim + ptratio + tax, data=train)
test$y_x1 <- predict(lm.1, newdata=test)
test$y_x2 <- predict(lm.2, newdata=test)
test$y_x3 <- predict(lm.3, newdata=test)
test$y_x4 <- predict(lm.4, newdata=test)
test$y_eq_1234<- apply(test[, c("y_x1","y_x2","y_x3", "y_x4")], 1, mean)
test$y_x1234 <- predict(lm.1234, newdata=test)
cor(test[, c("y_eq_1234", "y_x1234")])
RMSE
source("~/Dropbox/mungekit.R")
RMSE
RMSE()
?RMSE
?MSE
myRMSE()
myRMSE
myRMSE(a=test$cmedv, p=test$y_x1234)
myRMSE(a=test$cmedv, p=test$y_eq_1234)
myRMSE(a=test$cmedv, p=test$y_x1234)
myRMSE(a=test$cmedv, p=test$y_eq_1234)
myRMSE(a=test$cmedv, p=test$y_x1234)/myRMSE(a=test$cmedv, p=test$y_eq_1234)
myRMSE(a=test$cmedv, p=test$y_eq_1234)/myRMSE(a=test$cmedv, p=test$y_x1234)
data(BostonHousing2)
train_index <- sample(1:506, size=350, replace=F)
train <- BostonHousing2[train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
test <- BostonHousing2[-train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
lm.1 <- lm(cmedv ~ age, data=train)
lm.2 <- lm(cmedv ~ crim, data=train)
lm.3 <- lm(cmedv ~ ptratio, data=train)
lm.4 <- lm(cmedv ~ tax, data=train)
lm.1234 <- lm(cmedv ~ age + crim + ptratio + tax, data=train)
test$y_x1 <- predict(lm.1, newdata=test)
test$y_x2 <- predict(lm.2, newdata=test)
test$y_x3 <- predict(lm.3, newdata=test)
test$y_x4 <- predict(lm.4, newdata=test)
test$y_eq_1234<- apply(test[, c("y_x1","y_x2","y_x3", "y_x4")], 1, mean)
test$y_x1234 <- predict(lm.1234, newdata=test)
# cor(test[, c("y_eq_1234", "y_x1234")])
myRMSE(a=test$cmedv, p=test$y_eq_1234)/myRMSE(a=test$cmedv, p=test$y_x1234)
train_index <- sample(1:506, size=350, replace=F)
train <- BostonHousing2[train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
test <- BostonHousing2[-train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
lm.1 <- lm(cmedv ~ age, data=train)
lm.2 <- lm(cmedv ~ crim, data=train)
lm.3 <- lm(cmedv ~ ptratio, data=train)
lm.4 <- lm(cmedv ~ tax, data=train)
lm.1234 <- lm(cmedv ~ age + crim + ptratio + tax, data=train)
test$y_x1 <- predict(lm.1, newdata=test)
test$y_x2 <- predict(lm.2, newdata=test)
test$y_x3 <- predict(lm.3, newdata=test)
test$y_x4 <- predict(lm.4, newdata=test)
test$y_eq_1234<- apply(test[, c("y_x1","y_x2","y_x3", "y_x4")], 1, mean)
test$y_x1234 <- predict(lm.1234, newdata=test)
# cor(test[, c("y_eq_1234", "y_x1234")])
myRMSE(a=test$cmedv, p=test$y_eq_1234)/myRMSE(a=test$cmedv, p=test$y_x1234)
train_index <- sample(1:506, size=350, replace=F)
train <- BostonHousing2[train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
test <- BostonHousing2[-train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
lm.1 <- lm(cmedv ~ age, data=train)
lm.2 <- lm(cmedv ~ crim, data=train)
lm.3 <- lm(cmedv ~ ptratio, data=train)
lm.4 <- lm(cmedv ~ tax, data=train)
lm.1234 <- lm(cmedv ~ age + crim + ptratio + tax, data=train)
test$y_x1 <- predict(lm.1, newdata=test)
test$y_x2 <- predict(lm.2, newdata=test)
test$y_x3 <- predict(lm.3, newdata=test)
test$y_x4 <- predict(lm.4, newdata=test)
test$y_eq_1234<- apply(test[, c("y_x1","y_x2","y_x3", "y_x4")], 1, mean)
test$y_x1234 <- predict(lm.1234, newdata=test)
# cor(test[, c("y_eq_1234", "y_x1234")])
myRMSE(a=test$cmedv, p=test$y_eq_1234)/myRMSE(a=test$cmedv, p=test$y_x1234)
train_index <- sample(1:506, size=350, replace=F)
train <- BostonHousing2[train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
test <- BostonHousing2[-train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
lm.1 <- lm(cmedv ~ age, data=train)
lm.2 <- lm(cmedv ~ crim, data=train)
lm.3 <- lm(cmedv ~ ptratio, data=train)
lm.4 <- lm(cmedv ~ tax, data=train)
lm.1234 <- lm(cmedv ~ age + crim + ptratio + tax, data=train)
test$y_x1 <- predict(lm.1, newdata=test)
test$y_x2 <- predict(lm.2, newdata=test)
test$y_x3 <- predict(lm.3, newdata=test)
test$y_x4 <- predict(lm.4, newdata=test)
test$y_eq_1234<- apply(test[, c("y_x1","y_x2","y_x3", "y_x4")], 1, mean)
test$y_x1234 <- predict(lm.1234, newdata=test)
# cor(test[, c("y_eq_1234", "y_x1234")])
myRMSE(a=test$cmedv, p=test$y_eq_1234)/myRMSE(a=test$cmedv, p=test$y_x1234)
train_index <- sample(1:506, size=350, replace=F)
train <- BostonHousing2[train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
test <- BostonHousing2[-train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
lm.1 <- lm(cmedv ~ age, data=train)
lm.2 <- lm(cmedv ~ crim, data=train)
lm.3 <- lm(cmedv ~ ptratio, data=train)
lm.4 <- lm(cmedv ~ tax, data=train)
lm.1234 <- lm(cmedv ~ age + crim + ptratio + tax, data=train)
test$y_x1 <- predict(lm.1, newdata=test)
test$y_x2 <- predict(lm.2, newdata=test)
test$y_x3 <- predict(lm.3, newdata=test)
test$y_x4 <- predict(lm.4, newdata=test)
test$y_eq_1234<- apply(test[, c("y_x1","y_x2","y_x3", "y_x4")], 1, mean)
test$y_x1234 <- predict(lm.1234, newdata=test)
# cor(test[, c("y_eq_1234", "y_x1234")])
myRMSE(a=test$cmedv, p=test$y_eq_1234)/myRMSE(a=test$cmedv, p=test$y_x1234)
train_index <- sample(1:506, size=350, replace=F)
train <- BostonHousing2[train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
test <- BostonHousing2[-train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
lm.1 <- lm(cmedv ~ age, data=train)
lm.2 <- lm(cmedv ~ crim, data=train)
lm.3 <- lm(cmedv ~ ptratio, data=train)
lm.4 <- lm(cmedv ~ tax, data=train)
lm.1234 <- lm(cmedv ~ age + crim + ptratio + tax, data=train)
test$y_x1 <- predict(lm.1, newdata=test)
test$y_x2 <- predict(lm.2, newdata=test)
test$y_x3 <- predict(lm.3, newdata=test)
test$y_x4 <- predict(lm.4, newdata=test)
test$y_eq_1234<- apply(test[, c("y_x1","y_x2","y_x3", "y_x4")], 1, mean)
test$y_x1234 <- predict(lm.1234, newdata=test)
# cor(test[, c("y_eq_1234", "y_x1234")])
myRMSE(a=test$cmedv, p=test$y_eq_1234)/myRMSE(a=test$cmedv, p=test$y_x1234)
train_index <- sample(1:506, size=350, replace=F)
train <- BostonHousing2[train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
test <- BostonHousing2[-train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
lm.1 <- lm(cmedv ~ age, data=train)
lm.2 <- lm(cmedv ~ crim, data=train)
lm.3 <- lm(cmedv ~ ptratio, data=train)
lm.4 <- lm(cmedv ~ tax, data=train)
lm.1234 <- lm(cmedv ~ age + crim + ptratio + tax, data=train)
test$y_x1 <- predict(lm.1, newdata=test)
test$y_x2 <- predict(lm.2, newdata=test)
test$y_x3 <- predict(lm.3, newdata=test)
test$y_x4 <- predict(lm.4, newdata=test)
test$y_eq_1234<- apply(test[, c("y_x1","y_x2","y_x3", "y_x4")], 1, mean)
test$y_x1234 <- predict(lm.1234, newdata=test)
# cor(test[, c("y_eq_1234", "y_x1234")])
myRMSE(a=test$cmedv, p=test$y_eq_1234)/myRMSE(a=test$cmedv, p=test$y_x1234)
train_index <- sample(1:506, size=350, replace=F)
train <- BostonHousing2[train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
test <- BostonHousing2[-train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
lm.1 <- lm(cmedv ~ age, data=train)
lm.2 <- lm(cmedv ~ crim, data=train)
lm.3 <- lm(cmedv ~ ptratio, data=train)
lm.4 <- lm(cmedv ~ tax, data=train)
lm.1234 <- lm(cmedv ~ age + crim + ptratio + tax, data=train)
test$y_x1 <- predict(lm.1, newdata=test)
test$y_x2 <- predict(lm.2, newdata=test)
test$y_x3 <- predict(lm.3, newdata=test)
test$y_x4 <- predict(lm.4, newdata=test)
test$y_eq_1234<- apply(test[, c("y_x1","y_x2","y_x3", "y_x4")], 1, mean)
test$y_x1234 <- predict(lm.1234, newdata=test)
# cor(test[, c("y_eq_1234", "y_x1234")])
myRMSE(a=test$cmedv, p=test$y_eq_1234)/myRMSE(a=test$cmedv, p=test$y_x1234)
train_index <- sample(1:506, size=350, replace=F)
train <- BostonHousing2[train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
test <- BostonHousing2[-train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
lm.1 <- lm(cmedv ~ age, data=train)
lm.2 <- lm(cmedv ~ crim, data=train)
lm.3 <- lm(cmedv ~ ptratio, data=train)
lm.4 <- lm(cmedv ~ tax, data=train)
lm.1234 <- lm(cmedv ~ age + crim + ptratio + tax, data=train)
test$y_x1 <- predict(lm.1, newdata=test)
test$y_x2 <- predict(lm.2, newdata=test)
test$y_x3 <- predict(lm.3, newdata=test)
test$y_x4 <- predict(lm.4, newdata=test)
test$y_eq_1234<- apply(test[, c("y_x1","y_x2","y_x3", "y_x4")], 1, mean)
test$y_x1234 <- predict(lm.1234, newdata=test)
# cor(test[, c("y_eq_1234", "y_x1234")])
myRMSE(a=test$cmedv, p=test$y_eq_1234)/myRMSE(a=test$cmedv, p=test$y_x1234)
train_index <- sample(1:506, size=350, replace=F)
train <- BostonHousing2[train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
test <- BostonHousing2[-train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
lm.1 <- lm(cmedv ~ age, data=train)
lm.2 <- lm(cmedv ~ crim, data=train)
lm.3 <- lm(cmedv ~ ptratio, data=train)
lm.4 <- lm(cmedv ~ tax, data=train)
lm.1234 <- lm(cmedv ~ age + crim + ptratio + tax, data=train)
test$y_x1 <- predict(lm.1, newdata=test)
test$y_x2 <- predict(lm.2, newdata=test)
test$y_x3 <- predict(lm.3, newdata=test)
test$y_x4 <- predict(lm.4, newdata=test)
test$y_eq_1234<- apply(test[, c("y_x1","y_x2","y_x3", "y_x4")], 1, mean)
test$y_x1234 <- predict(lm.1234, newdata=test)
# cor(test[, c("y_eq_1234", "y_x1234")])
myRMSE(a=test$cmedv, p=test$y_eq_1234)/myRMSE(a=test$cmedv, p=test$y_x1234)
train_index <- sample(1:506, size=350, replace=F)
train <- BostonHousing2[train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
test <- BostonHousing2[-train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
lm.1 <- lm(cmedv ~ age, data=train)
lm.2 <- lm(cmedv ~ crim, data=train)
lm.3 <- lm(cmedv ~ ptratio, data=train)
lm.4 <- lm(cmedv ~ tax, data=train)
lm.1234 <- lm(cmedv ~ age + crim + ptratio + tax, data=train)
test$y_x1 <- predict(lm.1, newdata=test)
test$y_x2 <- predict(lm.2, newdata=test)
test$y_x3 <- predict(lm.3, newdata=test)
test$y_x4 <- predict(lm.4, newdata=test)
test$y_eq_1234<- apply(test[, c("y_x1","y_x2","y_x3", "y_x4")], 1, mean)
test$y_x1234 <- predict(lm.1234, newdata=test)
# cor(test[, c("y_eq_1234", "y_x1234")])
myRMSE(a=test$cmedv, p=test$y_eq_1234)/myRMSE(a=test$cmedv, p=test$y_x1234)
train_index <- sample(1:506, size=350, replace=F)
train <- BostonHousing2[train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
test <- BostonHousing2[-train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
lm.1 <- lm(cmedv ~ age, data=train)
lm.2 <- lm(cmedv ~ crim, data=train)
lm.3 <- lm(cmedv ~ ptratio, data=train)
lm.4 <- lm(cmedv ~ tax, data=train)
lm.1234 <- lm(cmedv ~ age + crim + ptratio + tax, data=train)
test$y_x1 <- predict(lm.1, newdata=test)
test$y_x2 <- predict(lm.2, newdata=test)
test$y_x3 <- predict(lm.3, newdata=test)
test$y_x4 <- predict(lm.4, newdata=test)
test$y_eq_1234<- apply(test[, c("y_x1","y_x2","y_x3", "y_x4")], 1, mean)
test$y_x1234 <- predict(lm.1234, newdata=test)
# cor(test[, c("y_eq_1234", "y_x1234")])
myRMSE(a=test$cmedv, p=test$y_eq_1234)/myRMSE(a=test$cmedv, p=test$y_x1234)
train_index <- sample(1:506, size=350, replace=F)
train <- BostonHousing2[train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
test <- BostonHousing2[-train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
lm.1 <- lm(cmedv ~ age, data=train)
lm.2 <- lm(cmedv ~ crim, data=train)
lm.3 <- lm(cmedv ~ ptratio, data=train)
lm.4 <- lm(cmedv ~ tax, data=train)
lm.1234 <- lm(cmedv ~ age + crim + ptratio + tax, data=train)
test$y_x1 <- predict(lm.1, newdata=test)
test$y_x2 <- predict(lm.2, newdata=test)
test$y_x3 <- predict(lm.3, newdata=test)
test$y_x4 <- predict(lm.4, newdata=test)
test$y_eq_1234<- apply(test[, c("y_x1","y_x2","y_x3", "y_x4")], 1, mean)
test$y_x1234 <- predict(lm.1234, newdata=test)
# cor(test[, c("y_eq_1234", "y_x1234")])
myRMSE(a=test$cmedv, p=test$y_eq_1234)/myRMSE(a=test$cmedv, p=test$y_x1234)
train_index <- sample(1:506, size=350, replace=F)
train <- BostonHousing2[train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
test <- BostonHousing2[-train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
lm.1 <- lm(cmedv ~ age, data=train)
lm.2 <- lm(cmedv ~ crim, data=train)
lm.3 <- lm(cmedv ~ ptratio, data=train)
lm.4 <- lm(cmedv ~ tax, data=train)
lm.1234 <- lm(cmedv ~ age + crim + ptratio + tax, data=train)
test$y_x1 <- predict(lm.1, newdata=test)
test$y_x2 <- predict(lm.2, newdata=test)
test$y_x3 <- predict(lm.3, newdata=test)
test$y_x4 <- predict(lm.4, newdata=test)
test$y_eq_1234<- apply(test[, c("y_x1","y_x2","y_x3", "y_x4")], 1, mean)
test$y_x1234 <- predict(lm.1234, newdata=test)
# cor(test[, c("y_eq_1234", "y_x1234")])
myRMSE(a=test$cmedv, p=test$y_eq_1234)/myRMSE(a=test$cmedv, p=test$y_x1234)
train_index <- sample(1:506, size=350, replace=F)
train <- BostonHousing2[train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
test <- BostonHousing2[-train_index, c("cmedv", "age", "crim", "ptratio", "tax")]
lm.1 <- lm(cmedv ~ age, data=train)
lm.2 <- lm(cmedv ~ crim, data=train)
lm.3 <- lm(cmedv ~ ptratio, data=train)
lm.4 <- lm(cmedv ~ tax, data=train)
lm.1234 <- lm(cmedv ~ age + crim + ptratio + tax, data=train)
test$y_x1 <- predict(lm.1, newdata=test)
test$y_x2 <- predict(lm.2, newdata=test)
test$y_x3 <- predict(lm.3, newdata=test)
test$y_x4 <- predict(lm.4, newdata=test)
test$y_eq_1234<- apply(test[, c("y_x1","y_x2","y_x3", "y_x4")], 1, mean)
test$y_x1234 <- predict(lm.1234, newdata=test)
# cor(test[, c("y_eq_1234", "y_x1234")])
myRMSE(a=test$cmedv, p=test$y_eq_1234)/myRMSE(a=test$cmedv, p=test$y_x1234)
setwd("~/Dropbox/Energy-Benchmarking-Philadelphia-Muni-Buildings/")
library(stringr)
system("ls")
energy_df <- read.csv("2011-13 Philadelphia Municipal Building Energy Usage.csv", stringsAsFactors=F)
names(energy_df)
loc_df <- energy_df[, c("Property.Id", "Property.Name", "Location")]
head(loc_df)
loc_df$coords <- str_sub(loc_df$Location, start=str_locate(loc_df$Location, pattern="(")[2])
loc_df$coords <- str_sub(loc_df$Location, start=str_locate(loc_df$Location, fixed="("))
?str_locate
loc_df$coords <- str_sub(loc_df$Location, start=str_locate(loc_df$Location, pattern=fixed("("))
loc_df$coords <- str_sub(loc_df$Location, start=str_locate(loc_df$Location, pattern=fixed("(")))
head(loc_df)
test <- loc_df$Location[1]
str_locate(test, pattern="(")
str_locate(test, pattern=fixed("("))
str_sub(test, start=47)
loc_df$coords <- str_sub(loc_df$Location, start=str_locate(loc_df$Location, pattern=fixed("("))[1])
head(loc_df)
loc_df$coords <- str_sub(loc_df$Location, start=str_locate(loc_df$Location, pattern=fixed("("))[2])
head(loc_df)
str_locate(loc_df$Location, pattern=fixed("("))[2]
str_locate_all(loc_df$Location, pattern=fixed("("))[2]
sapply(str_locate(loc_df$Location, pattern=fixed("("))
)
sapply(loc_df$Location, FUN=function(x){str_locate(x, pattern=fixed("("))})
sapply(loc_df$Location, FUN=function(x){str_locate(x, pattern=fixed("("))[1]})
str_sub(loc_df$Location, start=sapply(loc_df$Location, FUN=function(x){str_locate(x, pattern=fixed("("))[1]}))
loc_df$coords <- str_sub(loc_df$Location, start=sapply(loc_df$Location, FUN=function(x){str_locate(x, pattern=fixed("("))[1]}))
head(loc_df)
loc_df$lat <- str_sub(loc_df$coords,
start=sapply(loc_df$coords, FUN=function(x){str_locate(x, pattern=fixed("("))[1]}),
end=sapply(loc_df$coords, FUN=function(x){str_locate(x, pattern=fixed(","))[1]})
)
head(loc_df)
loc_df$lat <- str_sub(loc_df$coords,
start=sapply(loc_df$coords, FUN=function(x){str_locate(x, pattern=fixed("("))[1] + 1}),
end=sapply(loc_df$coords, FUN=function(x){str_locate(x, pattern=fixed(","))[1]} - 1)
)
head(loc_df)
str(loc_df)
loc_df$lat <- as.numeric(str_sub(loc_df$coords,
start=sapply(loc_df$coords, FUN=function(x){str_locate(x, pattern=fixed("("))[1] + 1}),
end=sapply(loc_df$coords, FUN=function(x){str_locate(x, pattern=fixed(","))[1]} - 1)
))
str(loc_df)
head(loc_df)
loc_df$lon <- str_sub(loc_df$coords,
start=sapply(loc_df$coords, FUN=function(x){str_locate(x, pattern=fixed(","))[1] + 2}),
end=sapply(loc_df$coords, FUN=function(x){str_locate(x, pattern=fixed(")"))[1]} - 1)
)
head(loc_df)
energy_df <- read.csv("2011-13 Philadelphia Municipal Building Energy Usage.csv", stringsAsFactors=F)
loc_df <- energy_df[, c("Property.Id", "Property.Name", "Location")]
loc_df$coords <- str_sub(loc_df$Location, start=sapply(loc_df$Location, FUN=function(x){str_locate(x, pattern=fixed("("))[1]}))
loc_df$lat <- str_sub(loc_df$coords,
start=sapply(loc_df$coords, FUN=function(x){str_locate(x, pattern=fixed("("))[1] + 1}),
end=sapply(loc_df$coords, FUN=function(x){str_locate(x, pattern=fixed(","))[1]} - 1)
)
loc_df$lon <- str_sub(loc_df$coords,
start=sapply(loc_df$coords, FUN=function(x){str_locate(x, pattern=fixed(","))[1] + 2}),
end=sapply(loc_df$coords, FUN=function(x){str_locate(x, pattern=fixed(")"))[1]} - 1)
)
head(loc_df)
loc_df[, c("Location", "coords")] <- NULL
loc_df[, "Location")] <- NULL
loc_df[, "Location"] <- NULL
loc_df$Location <- NULL
loc_df$coords <- NULL
head(loc_df)
write.table(loc_df, "muni_locations.csv", sep=",", header=T, row.names=F)
write.table(loc_df, "muni_locations.csv", sep=",", row.names=F)
